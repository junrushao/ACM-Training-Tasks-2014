<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><style>   body { font-family: 'Helvetica Neue', 'Helvetica', 'Arial', sans-serif; }</style><meta content="text/html; charset=UTF-8" http-equiv="Content-Type"><meta content="width=768" name="viewport"><meta content="IE=edge" http-equiv="X-UA-Compatible"><title>1829. Routing Tables @ Timus Online Judge</title></head><body alink="#1A5CC8" link="#1A5CC8" vlink="#1A5CC8"><div class="prnver"><h2 class="problem_title">1829. Routing Tables</h2><div class="problem_limits">Time limit: 2.0 second<br>Memory limit: 64 MB<br><br></div><div id="problem_text"><div class="problem_par"><div class="problem_par_normal">Routers are special devices used to forward data packets in modern computer 
networks. The behavior of a router is defined by a routing table. This table 
consists of several lines each of which contains the IP address of a 
destination network <i>d</i>, a mask <i>m</i>, and the IP address of a gateway <i>g</i>. For 
example, the line “192.168.24.0 255.255.255.0 192.168.14.1” means that a 
packet addressed to network 192.168.24.0 with mask 255.255.255.0 should 
be forwarded through gateway 192.168.14.1. 
</div></div><div class="problem_par"><div class="problem_par_normal">An IP address is a 32-bit integer, which is divided 
for convenience into four bytes. The value of each byte is written in decimal 
notation and these values are separated by dots. For example, the notation 
192.168.24.0 means the binary number 11000000101010000001100000000000. 
Masks are written similarly; moreover, the binary representation of a mask is 
started with ones only, which are followed by zeros only.
</div></div><div class="problem_par"><div class="problem_par_normal">The algorithm of choosing a route is as follows. Consider a packet sent to 
address <i>a</i>. The router selects form the table all the lines satisfying the 
condition <i>d</i> and <i>m</i> = <i>a</i> and <i>m</i> (`and' is the bitwise AND operation). A line 
with the maximal number of ones in the mask is then chosen from these lines and 
the packet is sent to the gateway specified in this line. It is guaranteed that 
there is at most one such line for any destination address. 
</div></div><div class="problem_par"><div class="problem_par_normal">Two routing tables are equivalent if a packet with any destination address will be sent to 
the same gateway (or will not be sent at all) according to these tables. The following
routing tables are equivalent:
<table>
<tbody><tr><td>
<pre>192.168.0.0 255.255.255.0 192.168.14.1
192.168.1.0 255.255.255.0 192.168.14.1
192.168.2.0 255.255.255.0 192.168.14.2
192.168.3.0 255.255.255.0 192.168.14.2
<pre></pre></pre></td><td>
<pre>192.168.0.0 255.255.252.0 192.168.14.1
192.168.2.0 255.255.254.0 192.168.14.2


</pre>
</td>
</tr></tbody></table>
Write a program to check if two routing tables are equivalent. 
</div></div><h3 class="problem_subtitle">Input</h3><div class="problem_par"><div class="problem_par_normal">The first line contains the number of lines in the first routing table.
This table is given in the following lines in the 
format described above. Then follows the second routing table in the same format.
The total number of lines in these tables doesn't exceed 65536.</div></div><h3 class="problem_subtitle">Output</h3><div class="problem_par"><div class="problem_par_normal">If the tables are equivalent, output “YES”. Otherwise, output “NO”.</div></div><h3 class="problem_subtitle">Samples</h3><table class="sample"><tbody><tr><th width="350">input</th><th width="350">output</th></tr><tr><td><pre class="intable">4
192.168.0.0 255.255.255.0 192.168.14.1
192.168.1.0 255.255.255.0 192.168.14.1
192.168.2.0 255.255.255.0 192.168.14.2
192.168.3.0 255.255.255.0 192.168.14.2
2
192.168.0.0 255.255.252.0 192.168.14.1
192.168.2.0 255.255.254.0 192.168.14.2
</pre></td><td><pre class="intable">YES

</pre></td></tr><tr><td><pre class="intable">1
192.168.0.0 255.255.255.0 192.168.14.1
2
192.168.0.0 255.255.255.0 192.168.14.1
172.16.0.0 255.255.0.0 172.16.0.1</pre></td><td><pre class="intable">NO
</pre></td></tr></tbody></table><div class="problem_source"><b>Problem Author: </b>Igor Andrianov<br><b>Problem Source: </b>XII USU Open Personal Contest (March 19, 2011)<br><br></div></div></div><script src="a_data/watch.js" async="" type="text/javascript"></script><script type="text/javascript">(function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter20918869 = new Ya.Metrika({id:20918869, webvisor:true, clickmap:true, trackLinks:true, accurateTrackBounce:true}); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks");</script><noscript><div><img alt="" src="http://mc.yandex.ru/watch/20918869" style="position:absolute; left:-9999px;"/></div></noscript><iframe name="RemoteIframe" allowtransparency="true" style="position: absolute; left: -999px; top: -999px; width: 1px; height: 1px;"></iframe></body></html>