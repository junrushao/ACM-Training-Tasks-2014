<html><head><style>   body { font-family: 'Helvetica Neue', 'Helvetica', 'Arial', sans-serif; }</style><meta content="no-cache" http-equiv="Pragma"><meta content="text/html; charset=UTF-8" http-equiv="Content-Type"><meta content="en-US" http-equiv="Content-Language"><title>3288 -- Mall Mania</title><style type="text/css">A {	TEXT-TRANSFORM: none; TEXT-DECORATION: none } A:hover { COLOR: red; TEXT-DECORATION: underline } A.s { TEXT-TRANSFORM: none; TEXT-DECORATION: none;	color:black; } A.s:hover {	COLOR: white; TEXT-DECORATION: none; } A.s0 { TEXT-TRANSFORM: none; TEXT-DECORATION: none;  color:#FFFF99;	font-weight:bold; } A.s0:hover { TEXT-DECORATION: underline; color:#FFFF99;	font-weight:bold; } A.t { TEXT-DECORATION: none; color:#FFFF66; } A.t:hover {	color:#FFFF66; text-decoration: underline; } A.x { TEXT-DECORATION: none; color:white; font-weight:bold;} A.x:hover {	color:#FFFF66; text-decoration: underline; font-weight:bold;} A.bt { padding:2px 3px 2px 3px; margin: 0px; height: 20px; color:blue; font-family:Verdana, Arial, Helvetica, sans-serif; font-size:12px;} A.bt:hover {background-color:#E6E6E6; padding:1px 2px; margin: 0px; border: 1px solid #999; height: 20px; color:#000066; text-decoration: none; cursor: hand;} div.sd1 { position:absolute; left:0px} div.sd2 { position:absolute; right:0px} div.ptt { text-align:center; font-family:Arial,Helvetica,sans-serif; font-size:18pt; font-weight:bold; color:blue;} div.plm { text-align:center; font-family:Arial,Helvetica,sans-serif; font-size:12pt;} div.ptx { font-family:"Times New Roman",Times,serif; font-size:12pt;} p.pst { text-align:left; font-family:Arial,Helvetica,sans-serif; font-size:18pt; font-weight:bold; color:blue;} pre.sio { font-family:Courier New,Courier,monospace; font-size:12pt;} th.h {color:#FFFFFF; font-family:Arial, Helvetica, sans-serif; width:20%;} td.h { font-family:Arial, Helvetica, sans-serif; } th.in {color:#FFFFFF; text-align:center; background-color:#6589d1; border-color:#FFFFFF; font-family:Arial, Helvetica, sans-serif; font-weight:bold; } table.a {background-image:url('images/table_back.jpg'); border-collapse:collapse; font-family:"Times New Roman", Times, serif; } table.h1 {border-collapse:collapse; width:100%; background-color:#BECEF1; border-width:0px;} table.h2 {width:100%; background:url('images/bar.jpg') repeat-y; border-width:0px;} tr.in {color:#FFFFFF; text-align:center; background-color:#6589d1; font-family:Arial, Helvetica, sans-serif; font-weight:bold; } tr.h { background-color:#6589d1; vertical-align:top; color:#FFFFFF; font-family:Arial, Helvetica, sans-serif; } span.b1 {color:#6589D1; font-weight:bold; font-size:x-small } span.b2 {color:gray; font-size:x-small } span.n1 {color:red; font-size:x-small } ul.v {filter:Alpha(opacity=100); overflow:hidden; } table.survey {border-collapse:collapse; font-family:"Times New Roman", Times, serif;}
.stdft { font-family:"Times New Roman", Times, serif; } span.h_txt { color: blue; } span.h_award { color: red; }  span.h_nocontest { color: #1a5cc8; }  span.h_contest { color: red;} 
</style></head><body leftmargin="5" onkeydown="KeyDown(event)" alink="blue" lang="en-US" link="blue" vlink="blue"><a name="top"></a><marquee behavior="ALTERNATE" scrollamount="3" scrolldelay="150"><font color="red">北京大学暑期课：<a href="http://acm.pku.edu.cn/summerschool/pku_acm_train.htm">《ACM/ICPC竞赛训练》</a>面向全球招生</font></marquee><table border="0" background="a_data/table_back.html" width="100%"><tbody><tr><td>
<div class="ptt" lang="en-US">Mall Mania</div>
<div class="plm"><table align="center"><tbody><tr><td><b>Time Limit:</b> 3000MS</td><td width="10px"></td><td><b>Memory Limit:</b> 65536K</td></tr></tbody></table></div><p class="pst">Description</p><div class="ptx" lang="en-US"><p>Waterloo
 has two giant shopping malls, each enclosing several city blocks. Kim 
and Pat like to shop and to walk within the malls but they don't like 
walking between the malls because such walking does not contribute 
directly to the task at hand: shopping. They would therefore like to 
know the minimum crossing distance between the malls. </p><p>Each city 
block is a unit square delimited by streets and avenues. Streets run 
east-west and avenues run north-south. Both are identified by 
consecutive integers between 0 and 2000. (Lower numbered avenues are 
west of higher numbered avenues and lower numbered streets are south of 
higher numbered streets.) Streets and avenues are narrow so their 
thickness may be assumed to be 0. </p><p>Each mall is a contiguous set 
of complete city blocks. By contiguous we mean that any two blocks are 
connected by some sequence of blocks such that consecutive pairs of 
blocks in the sequence share a side. The malls do not intersect and do 
not surround any empty blocks; that is, the blocks not in any mall are 
themselves contiguous. </p></div><p class="pst">Input</p><div class="ptx" lang="en-US"><p>Standard
 input contains several test cases. Each test case contains the 
description of the two malls. Each mall's description consists of an 
integer <i>p ≥ 4</i>, the perimeter of the mall, followed by one or more lines containing <i>p</i> pairs <i>(a,s)</i>
 giving the coordinates of the avenue-street intersections contained in 
the perimeter, in clockwise order. A line containing 0 follows the last 
test case. </p></div><p class="pst">Output</p><div class="ptx" lang="en-US"><p>For each case, output a single integer <i>d</i> -- the minimum walking distance between the malls, assuming that Kim and Pat always walk along streets and avenues. </p></div><p class="pst">Sample Input</p><pre class="sio">4
0 0 0 1 1 1 1 0
6
4 3 4 2 3 2
2 2 2 3
3 3
0</pre><p class="pst">Sample Output</p><pre class="sio">2</pre></td></tr></tbody></table>
<p></p>
</body></html>